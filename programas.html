<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Programas – Valmi TV</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <!-- Header no mesmo estilo da home -->
  <header>
    <div class="container navbar">
      <div class="brand">
        <a href="index.html" class="brand-link">
          <div class="brand-logo"></div>
          <div class="brand-title">VALMI TV</div>
        </a>
      </div>
      <div class="nav-toggle" onclick="toggleMenu()">
        <span></span><span></span><span></span>
      </div>
      <nav class="nav-menu" id="navMenu">
        <ul>
          <li class="nav-item"><a href="index.html" class="nav-link">Início</a></li>
          <li class="nav-item"><a href="programas.html" class="nav-link">Programas</a></li>
          <li class="nav-item"><a href="ao-vivo.html" class="nav-link">Ao vivo</a></li>
          <li class="nav-item"><a href="observatorio.html" class="nav-link">Observatório</a></li>
          <li class="nav-item"><a href="sobre.html" class="nav-link">Sobre</a></li>
          <li class="nav-item"><a href="contato.html" class="nav-link">Contato</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="page-header">
      <h1 class="page-title">Programas</h1>
      <p class="page-description">
        Explore os programas da Valmi TV por temática, formato e apresentador.
      </p>
    </section>

    <section class="section">
      <h2 class="section-title">Coleções principais</h2>
      <div class="grid-cards" style="margin-top: 1rem;">

        <!-- Valderi Programas – miniatura do último vídeo de uma playlist (ex: Crítica Católica) -->
        <a
          href="programas-valderi.html"
          class="card program-card"
          style="text-decoration:none;"
          data-playlist-id="PLrOEqj4ng7UJeLkyVzpXm2jMYz6qySQc9"
          data-program-name="Valderi Programas"
        >
          <div class="card-thumb program-thumb"></div>
          <div class="card-title">Valderi Programas</div>
          <div class="card-meta">Opinião, crítica, análise e formação.</div>
        </a>

        <!-- AFO Programas – coloque aqui uma playlist representativa da coleção AFO -->
        <a
          href="programas-afo.html"
          class="card program-card"
          style="text-decoration:none;"
          data-playlist-id="PLrOEqj4ng7UI6YRhZWWtOXJDPIXDXH3i_"
          data-program-name="AFO Programas"
        >
          <div class="card-thumb program-thumb"></div>
          <div class="card-title">AFO Programas</div>
          <div class="card-meta">Apostolado em Família de Oração.</div>
        </a>

        <!-- Observatório Podcast – se tiver playlist no YouTube, preencha; senão, thumb pode ficar estática -->
        <a
            href="observatorio.html"
            class="card"
            style="text-decoration:none;"
          >
            <div class="card-thumb program-thumb program-thumb-observatorio"></div>
            <div class="card-title">Observatório Podcast</div>
            <div class="card-meta">Podcast com reflexões e entrevistas.</div>
        </a>

      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <div>© <span id="year"></span> Valmi TV.</div>
    </div>
  </footer>

  <script>
    function toggleMenu() {
      const menu = document.getElementById('navMenu');
      menu.classList.toggle('open');
    }
    document.getElementById('year').textContent = new Date().getFullYear();

    // ================
    // MINIATURAS: último vídeo de cada playlist
    // ================
    const API_KEY = "AIzaSyAmNoCTSSD4t7YJCzo_Ak_BYXDmvFrM0cE";

    const programCards = Array.from(document.querySelectorAll(".program-card")).map(card => ({
      playlistId: card.dataset.playlistId,
      name: card.dataset.programName,
      thumbEl: card.querySelector(".program-thumb")
    }));

    async function getLatestThumb(p) {
      if (!p.playlistId || p.playlistId.includes("SEU_ID")) {
        return null; // se ainda não configurou a playlist, pula
      }

      const url =
        `https://www.googleapis.com/youtube/v3/playlistItems` +
        `?part=snippet&maxResults=1&playlistId=${p.playlistId}&key=${API_KEY}`;

      const res = await fetch(url);
      const data = await res.json();

      if (!data.items || !data.items.length) return null;

      const snippet = data.items[0].snippet;
      const thumbs = snippet.thumbnails || {};
      const thumbUrl =
        (thumbs.maxres && thumbs.maxres.url) ||
        (thumbs.high && thumbs.high.url) ||
        (thumbs.medium && thumbs.medium.url) ||
        (thumbs.default && thumbs.default.url) ||
        "";

      return { ...p, thumbUrl };
    }

    async function loadProgramThumbnails() {
      try {
        const results = await Promise.all(programCards.map(getLatestThumb));
        const valid = results.filter(Boolean);

        valid.forEach(v => {
          if (v.thumbEl && v.thumbUrl) {
            v.thumbEl.style.backgroundImage = `url('${v.thumbUrl}')`;
            v.thumbEl.style.backgroundSize = "cover";
            v.thumbEl.style.backgroundPosition = "center";
          }
        });
      } catch (error) {
        console.error("Erro ao carregar miniaturas de programas:", error);
      }
    }

    loadProgramThumbnails();
  </script>
</body>
</html>



